name: cisTEMx release

# "--disable-staticmode --enable-openmp --enable-debugmode"
on:
  push:
    branches: main
  pull_request:
    branches: main

jobs:
  run_build:
    runs-on: ubuntu-20.04
    - uses: actions/checkout@v2
      # the macro for CISTEM_VERSION_TEXT needs access to the history.
      with:
        fetch-depth: 0    
    - uses: bHimes/cisTEMx/.github/workflows/run_builds@dynamic_plus_singularity
      with:
        built_type: release
        configure_options: "--disable-staticmode --enable-openmp"
        runs_on_os: "ubuntu-20.04"

